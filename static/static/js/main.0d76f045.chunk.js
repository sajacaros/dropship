(this["webpackJsonpdropship-ui"]=this["webpackJsonpdropship-ui"]||[]).push([[0],{103:function(e,t,n){},120:function(e,t){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(75),i=n.n(o),s=(n(83),n(84),n(30)),c=n(18),l=n.n(c),u=n(28),d=n(4),m=n(5),p=n(8),h=n(6),f=n(7),v=n(29),g=n.n(v),j=(n(103),function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.onPress,a=e.disabled;return r.a.createElement("button",{width:"80px",disabled:a,onClick:n},t)}}]),n}(a.PureComponent));j.defaultProps={onPress:function(){}};var E=j,b=n(77),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pending";return function(t){var n=t.displayName,a=t.name,o=n||a;function i(n){var a=n.isPending,o=Object(b.a)(n,["isPending"]);return a?e:r.a.createElement(t,o)}return i.displayName="withLoading(".concat(o,")"),i}},w=n(20),O=n(17),P=n.n(O),x=n(76),k=n.n(x),C=n(16);P.a.registerTheme({color:{primary:"#03a9f4",secondary:"#795548",white:"#FFFFFF",gray:"#CCCCCC",default:"#999999"},size:{xg:24,lg:18,md:14,sm:12,xs:10},lineHeight:{xg:"60px",lg:"54px",md:"36px",sm:"24px",xs:"18px"},unit:4}),P.a.registerInterface(k.a);var S=C.withStyles,D=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.styles,n=e.children;return r.a.createElement("div",Object(C.css)(t.overlay),r.a.createElement("div",Object(C.css)(t.wrapper),r.a.createElement("div",Object(C.css)(t.container),n)))}}]),n}(a.PureComponent),F=S((function(e){var t=e.color;return{overlay:{position:"fixed",zIndex:9999,top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, .5)"},wrapper:{verticalAlign:"middle"},container:{margin:"40px auto 0px",padding:4*e.unit,backgroundColor:t.white,width:400}}}))(D),N=r.a.createContext({}),M=N.Provider,z=N.Consumer;var I,H=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.styles,a=e.large,o=e.xlarge,i=e.small,s=e.xsmall,c=e.primary,l=e.secondary;return r.a.createElement("span",Object(C.css)(n.default,s&&n.xsmall,i&&n.small,a&&n.large,o&&n.xlarge,l&&n.secondary,c&&n.primary),t)}}]),n}(a.PureComponent),L=S((function(e){var t=e.color,n=e.size;return{default:{color:t.default,fontSize:n.md},xlarge:{fontSize:n.xg},large:{fontSize:n.lg},small:{fontSize:n.sm},xsmall:{fontSize:n.xs},primary:{color:t.primary},secondary:{color:t.secondary}}}))(H);var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){Object(f.a)(a,t);var n=Object(h.a)(a);function a(e){var t;return Object(d.a)(this,a),(t=n.call(this,e)).state={showModal:!1},t.handleClose=t.handleClose.bind(Object(p.a)(t)),t.handleOpen=t.handleOpen.bind(Object(p.a)(t)),t}return Object(m.a)(a,[{key:"handleOpen",value:function(e,t){this.contentId=e,this.modalProps=t,this.setState({showModal:!0})}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"render",value:function(){var t=this.props.children,n=this.state.showModal,a=e[this.contentId];return r.a.createElement(M,{value:{openModal:this.handleOpen,closeModal:this.handleClose}},t,n&&a&&r.a.createElement(F,null,r.a.createElement(a,this.modalProps)))}}]),a}(a.PureComponent)}((I={},Object(w.a)(I,"start_modal",(function(e){e.id;var t=e.project,n=e.startF;return r.a.createElement(z,null,(function(e){var a=e.closeModal;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(L,null,t,"\uc744 \uc815\ub9d0\ub85c \uc2dc\uc791 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")),r.a.createElement(E,{primary:!0,onPress:function(){a(),n(t)}},"\uc608"),r.a.createElement(E,{onPress:a},"\ub2eb\uae30"))}))})),Object(w.a)(I,"stop_modal",(function(e){e.id;var t=e.project,n=e.stopF;return r.a.createElement(z,null,(function(e){var a=e.closeModal;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(L,null,t,"\uc744 \uc815\ub9d0\ub85c \uc911\uc9c0 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")),r.a.createElement(E,{primary:!0,onPress:function(){a(),n(t)}},"\uc608"),r.a.createElement(E,{onPress:a},"\ub2eb\uae30"))}))})),Object(w.a)(I,"update_modal",(function(e){e.id;var t=e.project,n=e.updateF;return r.a.createElement(z,null,(function(e){var a=e.closeModal;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(L,null,t,"\uc744 \uc815\ub9d0\ub85c \uc5c5\ub370\uc774\ud2b8 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")),r.a.createElement(E,{primary:!0,onPress:function(){a(),n(t)}},"\uc608"),r.a.createElement(E,{onPress:a},"\ub2eb\uae30"))}))})),I)),U=y(r.a.createElement(E,{disabled:!0},"pending"))(E);function A(e){var t=e.project,n=e.status,a=e.pid,o=void 0===a?"-":a,i=e.uptime,s=void 0===i?"-":i,c=e.startF,l=e.stopF,u=e.updateF,d=e.isPending;return r.a.createElement("div",{className:"status"},r.a.createElement("span",{className:"item"},t),r.a.createElement("span",{className:"item"},n),r.a.createElement("span",{className:"item"},"Down"===n?"-":o),r.a.createElement("span",{className:"item"},"Down"===n?"-":s),r.a.createElement(_,null,r.a.createElement(z,null,(function(e){var a=e.openModal;return r.a.createElement(U,{isPending:d,className:"item",onPress:"Down"===n?function(){return a("start_modal",{project:t,startF:c})}:function(){return a("stop_modal",{project:t,stopF:l})}},"Down"===n?"start":"stop")}))),r.a.createElement(_,null,r.a.createElement(z,null,(function(e){var n=e.openModal;return r.a.createElement(U,{isPending:d,className:"item",onPress:function(){return n("update_modal",{project:t,updateF:u})}},"update")}))))}A.defaultProps={isPending:!1};var B=A,J=n(12),T=n.n(J),W=(n(175),y(r.a.createElement(E,{disabled:!0},"pending"))(E));function q(e){var t=e.refresh,n=e.nowDate,a=e.isPending;return r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"info-item"},n),r.a.createElement(W,{isPending:a,className:"info-item",onPress:function(){return t()}},"refresh"))}q.propType={refresh:T.a.func.isRequired,nowDate:T.a.string};var R=q;var Y=function(e){var t=e.histories.map((function(e){var t=e.occuredDate,n=e.project,a=e.command,r=e.result;return t.toLocaleString()+" "+n+" "+a+" "+(r?"\uc131\uacf5":"\uc2e4\ud328")})).join("\n");return r.a.createElement("textarea",Object.assign({},Object(C.css)({width:"100%"},{height:"200px"},{overflowY:"scroll"}),{readOnly:!0,value:t}))},$=(n(176),function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).maxHistory=50,a.getSummary=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.doPending(),e.next=3,g.a.get(a.basicUrl+"/summary");case 3:t=e.sent,n=t.data.projects,a.setState({projects:n,isLoading:!1,nowDate:new Date}),a.doIdle();case 7:case"end":return e.stop()}}),e)}))),a.start=a.controlEndpoint("start"),a.stop=a.controlEndpoint("stop"),a.update=a.controlEndpoint("update"),a.state={isLoading:!0,isPending:!1,projects:[],nowDate:new Date,histories:[]},a.getSummary=a.getSummary.bind(Object(p.a)(a)),a.start=a.start.bind(Object(p.a)(a)),a.stop=a.stop.bind(Object(p.a)(a)),a.update=a.update.bind(Object(p.a)(a)),a.basicUrl=window.location.protocol+"//"+window.location.hostname+":3001/dropship/api/v1",a}return Object(m.a)(n,[{key:"pushHistory",value:function(e){var t,n;return this.state.histories.length===this.maxHistory?(t=[]).concat.apply(t,[e].concat(Object(s.a)(this.state.histories.slice(0,this.maxHistory-1)))):(n=[]).concat.apply(n,[e].concat(Object(s.a)(this.state.histories)))}},{key:"componentDidMount",value:function(){this.getSummary()}},{key:"doPending",value:function(){this.setState({isPending:!0})}},{key:"doIdle",value:function(){this.setState({isPending:!1})}},{key:"controlEndpoint",value:function(e){var t=this;return function(){var n=Object(u.a)(l.a.mark((function n(a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.doPending(),n.next=3,g.a.post(t.basicUrl+"/"+a+"/"+e).then((function(){var n=t.pushHistory({occuredDate:new Date,project:a,command:e,result:!0});t.setState({histories:n}),t.getSummary()})).catch((function(n){var r=t.pushHistory({occuredDate:new Date,project:a,command:e,result:!1});t.setState({histories:r})})).finally((function(){return t.doIdle()}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},{key:"render",value:function(){var e=this,t=this.state,n=t.projects,a=t.isLoading,o=t.nowDate,i=t.isPending;return r.a.createElement("section",{className:"container"},r.a.createElement(R,{refresh:this.getSummary,nowDate:o.toLocaleString(),isPending:i}),a?r.a.createElement("div",{className:"loader"},r.a.createElement("span",{className:"loader_text"},"'Loading...'")):r.a.createElement("div",{className:"items"},n.sort((function(e,t){return e.project.localeCompare(t.project)})).map((function(t){return r.a.createElement(B,{key:t.project,project:t.project,status:t.status,uptime:t.uptime,pid:t.pid,startF:e.start,stopF:e.stop,updateF:e.update,isPending:i})})),r.a.createElement(Y,{histories:this.state.histories})))}}]),n}(a.Component));var G=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("nav",null,r.a.createElement($,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},78:function(e,t,n){e.exports=n(177)},83:function(e,t,n){},84:function(e,t,n){}},[[78,1,2]]]);
//# sourceMappingURL=main.0d76f045.chunk.js.map