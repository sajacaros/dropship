(this["webpackJsonpdropship-ui"]=this["webpackJsonpdropship-ui"]||[]).push([[0],{20:function(e,t,n){},23:function(e,t,n){e.exports=n(50)},28:function(e,t,n){},29:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),s=n.n(i),o=(n(28),n(29),n(3)),c=n.n(o),u=n(5),l=n(7),d=n(8),m=n(4),p=n(9),f=n(10),g=n(6),h=n.n(g),v=n(2),b=n.n(v),P=(n(20),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.onPress,a=e.disabled;return r.a.createElement("button",{disabled:a,onClick:n},t)}}]),n}(a.PureComponent));P.defaultProps={onPress:function(){}};var w=P,E=n(22),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pending";return function(t){var n=t.displayName,a=t.name,i=n||a;function s(n){var a=n.isPending,i=Object(E.a)(n,["isPending"]);return a?e:r.a.createElement(t,i)}return s.displayName="withLoading(".concat(i,")"),s}},y=j(r.a.createElement(w,{disabled:!0},"pending"))(w);function N(e){var t=e.project,n=e.status,a=e.pid,i=e.uptime,s=e.startF,o=e.stopF,c=e.updateF,u=e.isPending;return r.a.createElement("div",{className:"status"},r.a.createElement("span",{className:"item"},t),r.a.createElement("span",{className:"item"},n),"Down"===n?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"item"},"-"),r.a.createElement("span",{className:"item"},"-"),r.a.createElement(y,{isPending:u,className:"item",onPress:function(){return s(t)}},"start")):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"item"},a),r.a.createElement("span",{className:"item"},i),r.a.createElement(y,{isPending:u,className:"item",onPress:function(){return o(t)}},"stop")),r.a.createElement(y,{isPending:u,className:"item",onPress:function(){return c(t)}},"update"))}N.prototype={project:b.a.string.isRequired,status:b.a.string.isRequired,uptime:b.a.string,pid:b.a.number,startF:b.a.func.isRequired,stopF:b.a.func.isRequired,updateF:b.a.func.isRequired,isPending:b.a.bool},N.defaultProps={isPending:!1};var O=N,k=j(r.a.createElement(w,{disabled:!0},"pending"))(w);function S(e){var t=e.refresh,n=e.nowDate,a=e.isPending;return r.a.createElement("div",{className:"info"},r.a.createElement("span",{className:"info-item"},n),r.a.createElement(k,{isPending:a,className:"info-item",onPress:function(){return t()}},"refresh"))}S.prototype={refresh:b.a.func.isRequired,nowDate:b.a.string};var F=S,x=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).getSummary=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.doPending(),e.next=3,h.a.get(a.basicUrl+"/summary");case 3:t=e.sent,n=t.data.projects,a.setState({projects:n,isLoading:!1,nowDate:new Date}),a.doIdle();case 7:case"end":return e.stop()}}),e)}))),a.start=function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.doPending(),e.next=3,h.a.post(a.basicUrl+"/"+t+"/start").then((function(){a.getSummary()})).catch((function(e){console.error(e)})).finally((function(){return a.doIdle()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.stop=function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.doPending(),e.next=3,h.a.post(a.basicUrl+"/"+t+"/stop").then((function(){return a.getSummary()})).catch((function(e){console.error(e)})).finally((function(){return a.doIdle()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.update=function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.doPending(),e.next=3,h.a.post(a.basicUrl+"/"+t+"/update").then((function(){return a.getSummary()})).catch((function(e){console.error(e)})).finally((function(){return a.doIdle()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!0,isPending:!1,projects:[],nowDate:new Date},a.getSummary=a.getSummary.bind(Object(m.a)(a)),a.start=a.start.bind(Object(m.a)(a)),a.stop=a.stop.bind(Object(m.a)(a)),a.update=a.update.bind(Object(m.a)(a)),a.basicUrl=window.location.protocol+"//"+window.location.hostname+":3001/dropship/api/v1",a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.getSummary()}},{key:"doPending",value:function(){this.setState({isPending:!0})}},{key:"doIdle",value:function(){this.setState({isPending:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.projects,a=t.isLoading,i=t.nowDate,s=t.isPending;return r.a.createElement("section",{className:"container"},r.a.createElement(F,{refresh:this.getSummary,nowDate:i.toLocaleString(),isPending:s}),a?r.a.createElement("div",{className:"loader"},r.a.createElement("span",{className:"loader_text"},"'Loading...'")):r.a.createElement("div",{className:"items"},n.sort((function(e,t){return e.project.localeCompare(t.project)})).map((function(t){return r.a.createElement(O,{key:t.project,project:t.project,status:t.status,uptime:t.uptime,pid:t.pid,startF:e.start,stopF:e.stop,updateF:e.update,isPending:s})}))))}}]),n}(a.Component);var D=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("nav",null,r.a.createElement(x,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.c8d30a28.chunk.js.map